#cloud-config
hostname: wonderland
manage_etc_hosts: true
resize_rootfs: true
growpart:
  mode: auto
  devices: ["/"]
  ignore_growroot_disabled: false
package_update: true
package_upgrade: true
package_reboot_if_required: true
packages:
  - zsh
  - ntp
  - avahi-daemon
  - inotify-tools
locale: en_US.UTF-8
timezone: Europe/Paris
users:
  - default
  - name: devas
    gecos: Shikanime Deva
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    lock_passwd: true
    ssh_authorized_keys:
      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIF7pi5OYqzuMkTymIbJUJteIU3dz+OgduiF5O9cA+B7u devas@ishtar
      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFChPMDHee+8F8tuchk8nLqdzVj1SOfLFv70NH95K6Yf williamphetsinorath@altashar
write_files:
  - content: |
      [server]
      host-name=wonderland
    permissions: "0644"
    path: /etc/avahi/avahi-daemon.conf
runcmd:
  - su devas -l -c "curl -L https://nixos.org/nix/install | NIX_EXTRA_CONF=\"experimental-features = nix-command flakes\" sh -s -- --daemon"
